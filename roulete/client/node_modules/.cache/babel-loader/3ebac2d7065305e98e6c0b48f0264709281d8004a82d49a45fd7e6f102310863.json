{"ast":null,"code":"import{useEffect,useState,useMemo}from\"react\";import{getRecordings}from\"../../actions/audio\";import Cookies from\"js-cookie\";import config from\"../../config/config.json\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserRecordings=()=>{const[currentPage,setCurrentPage]=useState(0);const itemsPerPage=10;const[filesArray,setFilesArray]=useState([]);const handleNext=()=>{setCurrentPage(prevPage=>prevPage+1);};const handlePrev=()=>{setCurrentPage(prevPage=>prevPage-1);};const startIndex=currentPage*itemsPerPage;const endIndex=startIndex+itemsPerPage;const currentFiles=useMemo(()=>{return filesArray.slice(startIndex,endIndex);},[startIndex,endIndex,filesArray]);useEffect(()=>{if(Cookies.get(\"userIdState\")){getRecordings(Cookies.get(\"userIdState\"),setFilesArray);}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:filesArray.length>0?/*#__PURE__*/_jsxs(\"section\",{className:\"flex flex-wrap flex-col text-white items-center gap-8 w-full\",children:[currentFiles.map(recording=>/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-flow-col w-full h-[100px] items-center rounded-lg bg-cyan-500 justify-items-center gap-4 md:gap-12 lg:gap-56\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://\".concat(config.hostname,\":\").concat(config.port,\"/api/files/download/\").concat(recording._id),className:\"h-[80px] w-[80px] bg-white\",download:recording.filename}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-black text-2xl\",children:recording.filename}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-gray-600 text-xl\",children:[recording.length,\" \\u0411\\u0430\\u0439\\u0442\"]})]},recording.id)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between w-full\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrev,disabled:currentPage===0,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:endIndex>=filesArray.length,children:\"\\u0412\\u043F\\u0435\\u0440\\u0435\\u0434\"})]})]}):/*#__PURE__*/_jsx(\"section\",{className:\"flex flex-wrap flex-col text-white items-center gap-8 w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-flow-col w-full h-[100px] items-center justify-items-center rounded-lg bg-cyan-500\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-black text-2xl\",children:\"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u043D\\u0435\\u0442\"})})})});};export default UserRecordings;","map":{"version":3,"names":["useEffect","useState","useMemo","getRecordings","Cookies","config","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserRecordings","currentPage","setCurrentPage","itemsPerPage","filesArray","setFilesArray","handleNext","prevPage","handlePrev","startIndex","endIndex","currentFiles","slice","get","children","length","className","map","recording","href","concat","hostname","port","_id","download","filename","id","onClick","disabled"],"sources":["/home/goik4/Универ/corsework/Voice-Roulete-Coursework/Voice-Roulete-Coursework/roulete/client/src/routes/UserRecordings/UserRecordings.tsx"],"sourcesContent":["import { FC, useEffect, useState, useMemo } from \"react\";\nimport { getRecordings } from \"../../actions/audio\";\nimport Cookies from \"js-cookie\";\nimport config from \"../../config/config.json\";\n\nconst UserRecordings: FC = () => {\n  const [currentPage, setCurrentPage] = useState(0);\n  const itemsPerPage = 10;\n  const [filesArray, setFilesArray] = useState([]);\n\n  const handleNext = () => {\n    setCurrentPage((prevPage) => prevPage + 1);\n  };\n\n  const handlePrev = () => {\n    setCurrentPage((prevPage) => prevPage - 1);\n  };\n\n  const startIndex = currentPage * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const currentFiles = useMemo(() => {\n    return filesArray.slice(startIndex, endIndex);\n  }, [startIndex, endIndex, filesArray]); \n\n  useEffect(() => {\n    if (Cookies.get(\"userIdState\")) {\n      getRecordings(Cookies.get(\"userIdState\"), setFilesArray);\n    }\n  }, []);\n\n  return (\n    <>\n      {\n      filesArray.length > 0 ? (\n        <section className=\"flex flex-wrap flex-col text-white items-center gap-8 w-full\">\n          {currentFiles.map((recording:any) => (\n            <div key={recording.id} className=\"grid grid-flow-col w-full h-[100px] items-center rounded-lg bg-cyan-500 justify-items-center gap-4 md:gap-12 lg:gap-56\">\n              <a\n                href={`https://${config.hostname}:${config.port}/api/files/download/${recording._id}`}\n                className=\"h-[80px] w-[80px] bg-white\"\n                download={recording.filename}\n              ></a>\n              <h2 className=\"text-black text-2xl\">{recording.filename}</h2>\n\n              <h4 className=\"text-gray-600 text-xl\">{recording.length} Байт</h4>\n            </div>\n          ))}\n          <div className=\"flex justify-between w-full\">\n          <button onClick={handlePrev} disabled={currentPage === 0}>Назад</button>\n          <button onClick={handleNext} disabled={endIndex >= filesArray.length}>Вперед</button>\n          </div>\n        </section>\n      ) : (\n        <section className=\"flex flex-wrap flex-col text-white items-center gap-8 w-full\">\n        <div className=\"grid grid-flow-col w-full h-[100px] items-center justify-items-center rounded-lg bg-cyan-500\">\n          <h2 className=\"text-black text-2xl\">Записей нет</h2>\n        </div>\n        </section>\n      )\n    }\n    </>\n  );\n};\n\nexport default UserRecordings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}