{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MainPageConnected=_ref=>{let{localStream,remoteAudioRef,terminateCall}=_ref;const[isMicMuted,setIsMicMuted]=useState(false);const[isRemoteAudioMuted,setIsRemoteAudioMuted]=useState(false);const toggleMic=()=>{if(localStream){const isEnabled=localStream.getAudioTracks().some(track=>track.enabled);localStream.getAudioTracks().forEach(track=>{track.enabled=!isEnabled;});setIsMicMuted(!isEnabled);}};const toggleRemoteAudio=()=>{if(remoteAudioRef.current){remoteAudioRef.current.muted=!remoteAudioRef.current.muted;setIsRemoteAudioMuted(remoteAudioRef.current.muted);}};useEffect(()=>{if(localStream){setIsMicMuted(!localStream.getAudioTracks().some(track=>track.enabled));}if(remoteAudioRef.current){setIsRemoteAudioMuted(remoteAudioRef.current.muted);}},[localStream,remoteAudioRef]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"w-full h-full flex content-center items-center flex-col bg-cyan-500 mx-[500px] shadow-2xl shadow-black\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-grow content-center items-center min-h-[200px] min-w-[200px] max-h-[200px] max-w-[200px]  mt-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex content-center  bg-anon bg-cover bg-no-repeat rounded-3xl \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex pb-10 hover:transition-all hover:opacity-80 flex-col items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{terminateCall();},className:\"bg-red-300 rounded-3xl text-3xl w-[250px] h-[40px] mb-5 mt-80 text-white\",children:\"\\u041E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C\\u0441\\u044F\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleRemoteAudio,children:isRemoteAudioMuted?\"Включить звук\":\"Выключить звук\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleMic,children:isMicMuted?\"Включить микрофон\":\"Выключить микрофон\"})]})]}),/*#__PURE__*/_jsx(\"audio\",{ref:remoteAudioRef,autoPlay:true})]});};export default MainPageConnected;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainPageConnected","_ref","localStream","remoteAudioRef","terminateCall","isMicMuted","setIsMicMuted","isRemoteAudioMuted","setIsRemoteAudioMuted","toggleMic","isEnabled","getAudioTracks","some","track","enabled","forEach","toggleRemoteAudio","current","muted","children","className","onClick","ref","autoPlay"],"sources":["/home/goik4/Универ/corsework/Voice-Roulete-Coursework/Voice-Roulete-Coursework/roulete/client/src/routes/MainPage/MainPageConnected.tsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\n\nconst MainPageConnected: React.FC<ConnectedMainPageProps> = ({\n  localStream,\n  remoteAudioRef,\n  terminateCall,\n}) => {\n\n  const [isMicMuted, setIsMicMuted] = useState(false);\n  const [isRemoteAudioMuted, setIsRemoteAudioMuted] = useState(false);\n\n  const toggleMic = () => {\n    if(localStream) {\n      const isEnabled = localStream.getAudioTracks().some(track => track.enabled);\n      localStream.getAudioTracks().forEach(track => {\n        track.enabled = !isEnabled;\n      });\n      setIsMicMuted(!isEnabled);\n    }\n  };\n\n  const toggleRemoteAudio = () => {\n    if (remoteAudioRef.current) {\n      remoteAudioRef.current.muted = !remoteAudioRef.current.muted;\n      setIsRemoteAudioMuted(remoteAudioRef.current.muted);\n    }\n  };\n\n  useEffect(() => {\n    if(localStream) {\n      setIsMicMuted(!localStream.getAudioTracks().some(track => track.enabled));\n    }\n    if(remoteAudioRef.current) {\n      setIsRemoteAudioMuted(remoteAudioRef.current.muted);\n    }\n  }, [localStream, remoteAudioRef]);\n\n  return (\n    <>\n    <section className=\"w-full h-full flex content-center items-center flex-col bg-cyan-500 mx-[500px] shadow-2xl shadow-black\">\n      <div className=\"flex flex-grow content-center items-center min-h-[200px] min-w-[200px] max-h-[200px] max-w-[200px]  mt-10\">\n        <div className=\"w-full h-full flex content-center  bg-anon bg-cover bg-no-repeat rounded-3xl \"></div>\n      </div>\n      <div className=\"flex pb-10 hover:transition-all hover:opacity-80 flex-col items-center justify-center\">\n        <button\n          onClick={() => {\n            terminateCall();\n          }}\n          className=\"bg-red-300 rounded-3xl text-3xl w-[250px] h-[40px] mb-5 mt-80 text-white\"\n        >\n          Отключиться\n        </button>\n      </div>\n      <div>\n      <button onClick={toggleRemoteAudio}>\n          {isRemoteAudioMuted ? \"Включить звук\" : \"Выключить звук\"}\n        </button>\n        <br />\n        <button onClick={toggleMic}>\n          {isMicMuted ? \"Включить микрофон\" : \"Выключить микрофон\"}\n        </button>\n      </div>\n    </section>\n    <audio ref={remoteAudioRef} autoPlay/>\n    </>\n  );\n};\n\nexport default MainPageConnected;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjD,KAAM,CAAAC,iBAAmD,CAAGC,IAAA,EAItD,IAJuD,CAC3DC,WAAW,CACXC,cAAc,CACdC,aACF,CAAC,CAAAH,IAAA,CAEC,KAAM,CAACI,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACe,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEnE,KAAM,CAAAiB,SAAS,CAAGA,CAAA,GAAM,CACtB,GAAGP,WAAW,CAAE,CACd,KAAM,CAAAQ,SAAS,CAAGR,WAAW,CAACS,cAAc,CAAC,CAAC,CAACC,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACC,OAAO,CAAC,CAC3EZ,WAAW,CAACS,cAAc,CAAC,CAAC,CAACI,OAAO,CAACF,KAAK,EAAI,CAC5CA,KAAK,CAACC,OAAO,CAAG,CAACJ,SAAS,CAC5B,CAAC,CAAC,CACFJ,aAAa,CAAC,CAACI,SAAS,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAAM,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAIb,cAAc,CAACc,OAAO,CAAE,CAC1Bd,cAAc,CAACc,OAAO,CAACC,KAAK,CAAG,CAACf,cAAc,CAACc,OAAO,CAACC,KAAK,CAC5DV,qBAAqB,CAACL,cAAc,CAACc,OAAO,CAACC,KAAK,CAAC,CACrD,CACF,CAAC,CAEDzB,SAAS,CAAC,IAAM,CACd,GAAGS,WAAW,CAAE,CACdI,aAAa,CAAC,CAACJ,WAAW,CAACS,cAAc,CAAC,CAAC,CAACC,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACC,OAAO,CAAC,CAAC,CAC3E,CACA,GAAGX,cAAc,CAACc,OAAO,CAAE,CACzBT,qBAAqB,CAACL,cAAc,CAACc,OAAO,CAACC,KAAK,CAAC,CACrD,CACF,CAAC,CAAE,CAAChB,WAAW,CAAEC,cAAc,CAAC,CAAC,CAEjC,mBACEN,KAAA,CAAAE,SAAA,EAAAoB,QAAA,eACAtB,KAAA,YAASuB,SAAS,CAAC,wGAAwG,CAAAD,QAAA,eACzHxB,IAAA,QAAKyB,SAAS,CAAC,2GAA2G,CAAAD,QAAA,cACxHxB,IAAA,QAAKyB,SAAS,CAAC,+EAA+E,CAAM,CAAC,CAClG,CAAC,cACNzB,IAAA,QAAKyB,SAAS,CAAC,uFAAuF,CAAAD,QAAA,cACpGxB,IAAA,WACE0B,OAAO,CAAEA,CAAA,GAAM,CACbjB,aAAa,CAAC,CAAC,CACjB,CAAE,CACFgB,SAAS,CAAC,0EAA0E,CAAAD,QAAA,CACrF,oEAED,CAAQ,CAAC,CACN,CAAC,cACNtB,KAAA,QAAAsB,QAAA,eACAxB,IAAA,WAAQ0B,OAAO,CAAEL,iBAAkB,CAAAG,QAAA,CAC9BZ,kBAAkB,CAAG,eAAe,CAAG,gBAAgB,CAClD,CAAC,cACTZ,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ0B,OAAO,CAAEZ,SAAU,CAAAU,QAAA,CACxBd,UAAU,CAAG,mBAAmB,CAAG,oBAAoB,CAClD,CAAC,EACN,CAAC,EACC,CAAC,cACVV,IAAA,UAAO2B,GAAG,CAAEnB,cAAe,CAACoB,QAAQ,MAAC,CAAC,EACpC,CAAC,CAEP,CAAC,CAED,cAAe,CAAAvB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}