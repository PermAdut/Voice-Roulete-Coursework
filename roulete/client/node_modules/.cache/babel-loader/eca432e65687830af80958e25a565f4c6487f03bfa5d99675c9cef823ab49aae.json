{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MainPageConnected=_ref=>{let{localStream,remoteAudioRef,terminateCall}=_ref;const[isMicMuted,setIsMicMuted]=useState(false);const[isRemoteAudioMuted,setIsRemoteAudioMuted]=useState(false);const toggleMic=()=>{if(localStream){const audioTracks=localStream.getAudioTracks();if(audioTracks.length>0){const currentlyEnabled=audioTracks[0].enabled;audioTracks[0].enabled=!currentlyEnabled;setIsMicMuted(!currentlyEnabled);}}};const toggleRemoteAudio=()=>{if(remoteAudioRef.current){remoteAudioRef.current.muted=!remoteAudioRef.current.muted;setIsRemoteAudioMuted(remoteAudioRef.current.muted);}};useEffect(()=>{if(localStream){setIsMicMuted(!localStream.getTracks().some(track=>track.enabled));}if(remoteAudioRef.current){setIsRemoteAudioMuted(remoteAudioRef.current.muted);}},[localStream,remoteAudioRef]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"w-full h-full flex content-center items-center flex-col bg-cyan-500 mx-[500px] shadow-2xl shadow-black\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-grow content-center items-center min-h-[200px] min-w-[200px] max-h-[200px] max-w-[200px]  mt-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex content-center  bg-anon bg-cover bg-no-repeat rounded-3xl \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex pb-10 hover:transition-all hover:opacity-80 flex-col items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{terminateCall();},className:\"bg-red-300 rounded-3xl text-3xl w-[250px] h-[40px] mb-5 mt-80 text-white\",children:\"\\u041E\\u0442\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C\\u0441\\u044F\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleRemoteAudio,children:isRemoteAudioMuted?\"Включить звук\":\"Выключить звук\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleMic,children:isMicMuted?\"Включить микрофон\":\"Выключить микрофон\"})]})]}),/*#__PURE__*/_jsx(\"audio\",{ref:remoteAudioRef,autoPlay:true})]});};export default MainPageConnected;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainPageConnected","_ref","localStream","remoteAudioRef","terminateCall","isMicMuted","setIsMicMuted","isRemoteAudioMuted","setIsRemoteAudioMuted","toggleMic","audioTracks","getAudioTracks","length","currentlyEnabled","enabled","toggleRemoteAudio","current","muted","getTracks","some","track","children","className","onClick","ref","autoPlay"],"sources":["/home/goik4/Универ/corsework/Voice-Roulete-Coursework/Voice-Roulete-Coursework/roulete/client/src/routes/MainPage/MainPageConnected.tsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\n\nconst MainPageConnected: React.FC<ConnectedMainPageProps> = ({\n  localStream,\n  remoteAudioRef,\n  terminateCall,\n}) => {\n\n  const [isMicMuted, setIsMicMuted] = useState(false);\n  const [isRemoteAudioMuted, setIsRemoteAudioMuted] = useState(false);\n\n  const toggleMic = () => {\n    if(localStream) {\n      const audioTracks = localStream.getAudioTracks();\n      if (audioTracks.length > 0) {\n        const currentlyEnabled = audioTracks[0].enabled;\n        audioTracks[0].enabled = !currentlyEnabled;\n        setIsMicMuted(!currentlyEnabled);\n      }\n    }\n  };\n\n  const toggleRemoteAudio = () => {\n    if (remoteAudioRef.current) {\n      remoteAudioRef.current.muted = !remoteAudioRef.current.muted;\n      setIsRemoteAudioMuted(remoteAudioRef.current.muted);\n    }\n  };\n\n  useEffect(() => {\n    if(localStream) {\n      setIsMicMuted(!localStream.getTracks().some(track => track.enabled));\n    }\n    if(remoteAudioRef.current) {\n      setIsRemoteAudioMuted(remoteAudioRef.current.muted);\n    }\n  }, [localStream, remoteAudioRef]);\n\n  return (\n    <>\n    <section className=\"w-full h-full flex content-center items-center flex-col bg-cyan-500 mx-[500px] shadow-2xl shadow-black\">\n      <div className=\"flex flex-grow content-center items-center min-h-[200px] min-w-[200px] max-h-[200px] max-w-[200px]  mt-10\">\n        <div className=\"w-full h-full flex content-center  bg-anon bg-cover bg-no-repeat rounded-3xl \"></div>\n      </div>\n      <div className=\"flex pb-10 hover:transition-all hover:opacity-80 flex-col items-center justify-center\">\n        <button\n          onClick={() => {\n            terminateCall();\n          }}\n          className=\"bg-red-300 rounded-3xl text-3xl w-[250px] h-[40px] mb-5 mt-80 text-white\"\n        >\n          Отключиться\n        </button>\n      </div>\n      <div>\n      <button onClick={toggleRemoteAudio}>\n          {isRemoteAudioMuted ? \"Включить звук\" : \"Выключить звук\"}\n        </button>\n        <br />\n        <button onClick={toggleMic}>\n          {isMicMuted ? \"Включить микрофон\" : \"Выключить микрофон\"}\n        </button>\n      </div>\n    </section>\n    <audio ref={remoteAudioRef} autoPlay/>\n    </>\n  );\n};\n\nexport default MainPageConnected;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjD,KAAM,CAAAC,iBAAmD,CAAGC,IAAA,EAItD,IAJuD,CAC3DC,WAAW,CACXC,cAAc,CACdC,aACF,CAAC,CAAAH,IAAA,CAEC,KAAM,CAACI,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACe,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAEnE,KAAM,CAAAiB,SAAS,CAAGA,CAAA,GAAM,CACtB,GAAGP,WAAW,CAAE,CACd,KAAM,CAAAQ,WAAW,CAAGR,WAAW,CAACS,cAAc,CAAC,CAAC,CAChD,GAAID,WAAW,CAACE,MAAM,CAAG,CAAC,CAAE,CAC1B,KAAM,CAAAC,gBAAgB,CAAGH,WAAW,CAAC,CAAC,CAAC,CAACI,OAAO,CAC/CJ,WAAW,CAAC,CAAC,CAAC,CAACI,OAAO,CAAG,CAACD,gBAAgB,CAC1CP,aAAa,CAAC,CAACO,gBAAgB,CAAC,CAClC,CACF,CACF,CAAC,CAED,KAAM,CAAAE,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,GAAIZ,cAAc,CAACa,OAAO,CAAE,CAC1Bb,cAAc,CAACa,OAAO,CAACC,KAAK,CAAG,CAACd,cAAc,CAACa,OAAO,CAACC,KAAK,CAC5DT,qBAAqB,CAACL,cAAc,CAACa,OAAO,CAACC,KAAK,CAAC,CACrD,CACF,CAAC,CAEDxB,SAAS,CAAC,IAAM,CACd,GAAGS,WAAW,CAAE,CACdI,aAAa,CAAC,CAACJ,WAAW,CAACgB,SAAS,CAAC,CAAC,CAACC,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACN,OAAO,CAAC,CAAC,CACtE,CACA,GAAGX,cAAc,CAACa,OAAO,CAAE,CACzBR,qBAAqB,CAACL,cAAc,CAACa,OAAO,CAACC,KAAK,CAAC,CACrD,CACF,CAAC,CAAE,CAACf,WAAW,CAAEC,cAAc,CAAC,CAAC,CAEjC,mBACEN,KAAA,CAAAE,SAAA,EAAAsB,QAAA,eACAxB,KAAA,YAASyB,SAAS,CAAC,wGAAwG,CAAAD,QAAA,eACzH1B,IAAA,QAAK2B,SAAS,CAAC,2GAA2G,CAAAD,QAAA,cACxH1B,IAAA,QAAK2B,SAAS,CAAC,+EAA+E,CAAM,CAAC,CAClG,CAAC,cACN3B,IAAA,QAAK2B,SAAS,CAAC,uFAAuF,CAAAD,QAAA,cACpG1B,IAAA,WACE4B,OAAO,CAAEA,CAAA,GAAM,CACbnB,aAAa,CAAC,CAAC,CACjB,CAAE,CACFkB,SAAS,CAAC,0EAA0E,CAAAD,QAAA,CACrF,oEAED,CAAQ,CAAC,CACN,CAAC,cACNxB,KAAA,QAAAwB,QAAA,eACA1B,IAAA,WAAQ4B,OAAO,CAAER,iBAAkB,CAAAM,QAAA,CAC9Bd,kBAAkB,CAAG,eAAe,CAAG,gBAAgB,CAClD,CAAC,cACTZ,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ4B,OAAO,CAAEd,SAAU,CAAAY,QAAA,CACxBhB,UAAU,CAAG,mBAAmB,CAAG,oBAAoB,CAClD,CAAC,EACN,CAAC,EACC,CAAC,cACVV,IAAA,UAAO6B,GAAG,CAAErB,cAAe,CAACsB,QAAQ,MAAC,CAAC,EACpC,CAAC,CAEP,CAAC,CAED,cAAe,CAAAzB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}